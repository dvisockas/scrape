<!DOCTYPE html>
<html>
  <head>
    <title>Bra</title>
    <style type="text/css">
      html {
        height: 100vh;
      }
      body {
        margin: 0;
        height: 100%;
        overflow-y: hidden;
      }
      #frame {
        width: 100%;
        height: 100%;
        border: none;
      }
    </style>
  </head>
  <body>
    <button id='butt'>Labas</button>
    <iframe src="/resource?url=https://dezutes.lt" id="frame"></iframe>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
    <script type="text/javascript">
      $(document).ready(function () {
        var frame = $('#frame');

        $('#butt').on('click', function () {
          var doc = frame.contents()[0];

          doc.onclick = function (event) {
            console.log(event)
            console.log(getXPath(event.target))
          }
        })

        // frame.ready(function () {
        //   console.log(doc)
        //   $(doc).ready(function () {
        //     console.log('ka')

        //   })
          // setTimeout(function () {
          // }, 2000)
        // });
      })


      function getXPath (element) {
        var xpath = '';
        for ( ; element && element.nodeType == 1; element = element.parentNode ) {
          var id = $(element.parentNode).children(element.tagName).index(element) + 1;
          id > 1 ? (id = '[' + id + ']') : (id = '');
          xpath = '/' + element.tagName.toLowerCase() + id + xpath;
        }
        return xpath;
      }

      function getElementsFromXPath (xpath, document) {
        var result = [];
        var nodesSnapshot = document.evaluate(xpath, document, null, XPathResult.ORDERED_NODE_SNAPSHOT_TYPE, null );
        for ( var i=0 ; i < nodesSnapshot.snapshotLength; i++ ){
          result.push( nodesSnapshot.snapshotItem(i) );
        }
        return result;
      }
    </script>
  </body>
</html>